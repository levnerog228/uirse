<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Инструменты</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: Roboto, sans-serif;
        background-color: #f5f5f5;
        min-height: 100vh;
      }

      .main-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 5%;
        min-height: 100vh;
      }

      .content-container {
        background-color: #fff;
        width: 100%;
        max-width: 2200px;
        border-radius: 10px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-grow: 1;
      }

      .header-nav {
        background-color: #676767;
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 20px;
        border-radius: 10px;
        width: 100%;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .logo {
        height: 50px;
        max-width: 150px;
      }

      .tools-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
      }

      .page-menu {
        display: none;
        position: absolute;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 5px;
        width: 200px;
        z-index: 10;
      }

      .page-menu ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
      }

      .page-menu li {
        padding: 10px;
        text-align: center;
      }

      .page-menu li a {
        text-decoration: none;
        color: #333;
        display: block;
      }

      .page-menu li a:hover {
        background-color: #f0f0f0;
      }

      .search-box {
        border: 2px solid white;
        border-radius: 15px;
        height: 35px;
        width: 200px;
        padding: 5px;
        font-size: 14px;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        z-index: 100;
      }

      .nav-actions button:nth-child(1),
      .nav-actions button:nth-child(2) {
        background-color: transparent;
        border: none;
        padding: 8px 12px;
        border-radius: 10px;
        color: white;
        cursor: pointer;
        font-size: 16px;
      }

      .nav-actions button:nth-child(3) {
        background-color: #FB9C9C;
        border: none;
        padding: 12px 12px;
        border-radius: 10px;
        color: white;
        cursor: pointer;
        font-size: 16px;
      }

      .page-title {
        text-align: center;
        margin: 20px 0;
        font-size: 2.5rem;
        color: #676767;
      }

      .cards-container {
         display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 30px;
        width: 100%;
        max-width: 1200px;
        margin: 40px 0;
        align-items: flex-start; /* Важно: выравниваем по верхнему краю */
      }

      .card {
        position: relative;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 280px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        border: 1px solid #e0e0e0;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }

      .card-content {
      flex: 1; /* Занимает все доступное пространство */
        position: relative;
        z-index: 2;
      }

      .card h3 {
        color: #676767;
        margin-bottom: 15px;
        font-size: 1.4rem;
      }

      .card p {
        color: #8a8a8a;
        font-size: 1rem;
        line-height: 1.5;
      }

      .card-more {
        color: #FB9C9C;
        margin-top: 15px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-block;
      }


        overflow: hidden;
        white-space: nowrap;
      }

      .card-more:hover {
        color: #ff7a7a;
        text-decoration: underline;
      }

      .card-details {
        max-height: 0;
        overflow: hidden;
        transition: max-height 1.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: left;
        margin-top: 10px;
        padding: 0 10px;
        border-top: 1px solid transparent;
      }

      .card-details.active {
        max-height: 300px;
        border-top: 1px solid #e0e0e0;
        padding: 10px;

       transition: max-height 1.3s cubic-bezier(0.4, 0, 0.2, 1);
      }



      .card-details p {
        margin: 8px 0;
        font-size: 0.9rem;
        color: #676767;
      }

      .card-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
      }

      .card-button {
        background-color: #FB9C9C;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.7s ease;
        flex: 1;
        margin: 0 5px;
      }
      .card-content {
        position: relative;
        z-index: 2;
      }

      .card-button:hover {
        background-color: #ff7a7a;
        transform: translateY(-2px);
      }

      .card-button.instruction {
        background-color: #676767;
      }

      .card-button.instruction:hover {
        background-color: #4d4d4d;
      }

      .info-container {
        width: 100%;
        margin-top: 50px;
        display: flex;
        justify-content: center;
      }

      .info-panel {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 1200px;
        gap: 20px;
        flex-wrap: wrap;
      }

      .image-info {
        border-radius: 10px;
        background: #fff;
        display: flex;
        flex-direction: column;
        align-items: start;
        color: #676767;
        flex-grow: 1;
        padding: 20px 40px;
        font: 300 12px Roboto, sans-serif;
        border: 1px solid #d9d9d9;
        margin-bottom: 20px;
        max-width: 100%;
      }

      .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        transform: scale(0.8);
        transition: opacity 0.3s ease, transform 0.3s ease;
      }

      .popup.show {
        opacity: 1;
        transform: scale(1);
      }

      .popup-content {
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        max-width: 90%;
        max-height: 90%;
        display: flex;
        flex-direction: column;
        position: relative; /* Для позиционирования крестика */
      }

      .popup-close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 24px;
        color: #676767;
        cursor: pointer;
        background: none;
        border: none;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .popup-close:hover {
        color: #FB9C9C;
        transform: scale(1.1);
      }
      #instruction-title {
        margin-right: 30px; /* Чтобы заголовок не заезжал под крестик */
        padding-top: 5px;
      }

      @media (max-width: 991px) {
        .header-nav {
          flex-direction: column;
          align-items: center;
          padding: 15px 20px;
        }

        .logo {
          height: 30px;
          margin-bottom: 10px;
        }

        .tools-container {
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }

        .search-box {
          width: 150px;
          height: 35px;
        }

        .nav-actions button {
          padding: 8px 10px;
          font-size: 12px;
        }

        .page-title {
          font-size: 1.8rem;
        }

        .cards-container {
          flex-direction: column;
          align-items: center;
        }

        .card {
          width: 90%;
          max-width: 350px;
        }

        .card-buttons {
          flex-direction: column;
        }

        .card-button {
          width: 100%;
          margin: 5px 0;
        }

        .info-panel {
          flex-direction: column;
          align-items: center;
        }

        .image-info {
          width: 100%;
          margin-top: 20px;
          padding: 15px;
        }
      }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <div class="content-container">
            <nav class="header-nav">
                <img src="logo.png" alt="Site Logo" class="logo" />
                <div class="tools-container">
                    <input type="text" class="search-box" placeholder="Все инструменты..." id="search-box" onkeydown="handleSearch(event)" oninput="showMenu()">
                </div>
                <div class="nav-actions">
                    <button>Помощь</button>
                    <button>Информация</button>
                    <button>Вход и регистрация</button>
                </div>
            </nav>

            <div id="page-menu" class="page-menu">
                <ul>
                    <li><a href="/select_area">Select Area</a></li>
                    <li><a href="/find_area">Find Area</a></li>
                    <li><a href="/test">edge</a></li>
                    <li><a href="/select_area">color</a></li>
                </ul>
            </div>

            <h1 class="page-title">Инструменты</h1>

            <div class="cards-container">
                <!-- Карточка 1 -->
                <div class="card">
                    <div class="card-content" onclick="window.location.href='compress'">
                        <h3>Сжатие изображений</h3>
                        <p>Оптимизируйте размер ваших изображений без потери качества, уменьшая их вес для веб-сайтов и приложений.</p>
                    </div>

                    <div class="card-more" onclick="toggleDetails(this)">Подробнее ▼</div>
                    <div class="card-details">
                        <p>• Поддерживаемые форматы: JPEG, PNG, WEBP</p>
                        <p>• Максимальный размер файла: 20MB</p>
                        <p>• Оптимизация без потери качества</p>
                        <p>• Настройка уровня сжатия</p>
                    </div>

                    <div class="card-buttons">
                        <button class="card-button" onclick="event.stopPropagation(); window.location.href='compress'">Открыть</button>
                        <button class="card-button instruction" onclick="event.stopPropagation(); showInstruction('compress')">Инструкция</button>
                    </div>
                </div>

                <!-- Карточка 2 -->
                <div class="card">
                    <div class="card-content" onclick="window.location.href='find_area'">
                        <h3>Поиск областей</h3>
                        <p>Автоматическое обнаружение и выделение значимых областей на изображении с помощью алгоритмов компьютерного зрения.</p>
                    </div>

                    <div class="card-more" onclick="toggleDetails(this)">Подробнее ▼</div>
                    <div class="card-details">
                        <p>• Автоматическое обнаружение объектов</p>
                        <p>• Настройка чувствительности</p>
                        <p>• Поддержка нескольких форматов</p>
                        <p>• Экспорт координат областей</p>
                    </div>

                    <div class="card-buttons">
                        <button class="card-button" onclick="event.stopPropagation(); window.location.href='find_area'">Открыть</button>
                        <button class="card-button instruction" onclick="event.stopPropagation(); showInstruction('find_area')">Инструкция</button>
                    </div>
                </div>

                <!-- Карточка 3 -->
                <div class="card">
                    <div class="card-content" onclick="window.location.href='select_area'">
                        <h3>Выбор области</h3>
                        <p>Точное выделение нужных участков изображения вручную с помощью интуитивно понятных инструментов  </p>
                        <p> <span>&shy;</span>   </p>
                    </div>


                    <div class="card-more" onclick="toggleDetails(this)">Подробнее ▼</div>
                    <div class="card-details">
                        <p>• Ручное выделение областей</p>
                        <p>• Точная настройка границ</p>
                        <p>• Инструменты масштабирования</p>
                        <p>• Поддержка слоев выделения</p>
                    </div>

                    <div class="card-buttons">
                        <button class="card-button" onclick="event.stopPropagation(); window.location.href='select_area'">Открыть</button>
                        <button class="card-button instruction" onclick="event.stopPropagation(); showInstruction('select_area')">Инструкция</button>
                    </div>
                </div>

                <!-- Карточка 4 -->
                <div class="card">
                    <div class="card-content" onclick="window.location.href='test'">
                        <h3>Тестирование</h3>
                        <p>Экспериментальные функции и тестовые инструменты для работы с изображениями и анализа их характеристик.</p>
                    </div>

                    <div class="card-more" onclick="toggleDetails(this)">Подробнее ▼</div>
                    <div class="card-details">
                        <p>• Тестирование новых алгоритмов</p>
                        <p>• Анализ характеристик изображений</p>
                        <p>• Экспериментальные фильтры</p>
                        <p>• Бета-функции</p>
                    </div>

                    <div class="card-buttons">
                        <button class="card-button" onclick="event.stopPropagation(); window.location.href='test'">Открыть</button>
                        <button class="card-button instruction" onclick="event.stopPropagation(); showInstruction('test')">Инструкция</button>
                    </div>
                </div>
            </div>

            <div class="info-container">
                <div class="info-panel">
                    <div class="image-info">
                        <h3>О сервисе</h3>
                        <p>Наш сервис предоставляет набор инструментов для работы с изображениями. Вы можете сжимать изображения, находить и выделять области, а также тестировать экспериментальные функции.</p>
                    </div>
                    <div class="image-info">
                        <h3>Техническая информация</h3>
                        <p>Все инструменты работают в вашем браузере без загрузки данных на сервер. Мы используем современные технологии обработки изображений для обеспечения высокой производительности.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Попап для инструкций -->
    <div id="instruction-popup" class="popup">
        <div class="popup-content" style="max-width: 600px;">
            <span class="popup-close" onclick="closePopup('instruction-popup')">&times;</span>
            <h2 id="instruction-title">Инструкция</h2>
            <div id="instruction-content" style="padding: 20px; text-align: left;">
                <!-- Контент инструкции будет загружаться динамически -->
            </div>
        </div>
    </div>

    <script>
       function toggleDetails(element) {
            event.stopPropagation();

            const details = element.nextElementSibling;
            const isOpening = !details.classList.contains('active');

            // Плавное исчезновение текущего текста
            element.style.opacity = '0';

            setTimeout(() => {
                // Изменение текста после исчезновения
                element.textContent = isOpening ? 'Скрыть ▲' : 'Подробнее ▼';

                // Плавное появление нового текста
                element.style.opacity = '1';

                // Переключение состояния details после смены текста
                if (isOpening) {
                    // Закрываем другие открытые карточки
                    document.querySelectorAll('.card-details.active').forEach(openDetail => {
                        if (openDetail !== details) {
                            const prevElement = openDetail.previousElementSibling;
                            prevElement.style.opacity = '0';
                            setTimeout(() => {
                                prevElement.textContent = 'Подробнее ▼';
                                prevElement.style.opacity = '1';
                                openDetail.classList.remove('active');
                            }, 50);
                        }
                    });

                    details.classList.add('active');
                } else {
                    details.classList.remove('active');
                }
            }, 150); // Время должно совпадать с временем transition opacity
        }


        // Функция для показа инструкции
        function showInstruction(tool) {
            const title = document.getElementById('instruction-title');
            const content = document.getElementById('instruction-content');

            // Контент для разных инструментов
            const instructions = {
                'compress': {
                    title: 'Инструкция по сжатию изображений',
                    content: '<ol><li>Загрузите изображение, нажав кнопку "Импортировать"</li><li>Используйте ползунок для настройки уровня сжатия</li><li>Просмотрите результат в правой части экрана</li><li>Нажмите "Сохранить" для загрузки обработанного изображения</li></ol>'
                },
                'find_area': {
                    title: 'Инструкция по поиску областей',
                    content: '<ol><li>Загрузите изображение для анализа</li><li>Настройте параметры чувствительности обнаружения</li><li>Просмотрите обнаруженные области</li><li>Экспортируйте результат при необходимости</li></ol>'
                },
                'select_area': {
                    title: 'Инструкция по выделению областей',
                    content: '<ol><li>Загрузите изображение</li><li>Используйте инструменты выделения (прямоугольник, лассо и т.д.)</li><li>Точно настройте границы выделения</li><li>Сохраните или экспортируйте выделенную область</li></ol>'
                },
                'test': {
                    title: 'Инструкция по тестированию',
                    content: '<ol><li>Выберите тестовую функцию из меню</li><li>Загрузите изображение для обработки</li><li>Настройте параметры эксперимента</li><li>Просмотрите и оцените результаты</li></ol>'
                }
            };

            title.textContent = instructions[tool].title;
            content.innerHTML = instructions[tool].content;

            openPopup('instruction-popup');
        }

        // Функции для работы с попапами
        function openPopup(id) {
            const popup = document.getElementById(id);
            popup.style.display = 'flex';
            setTimeout(() => {
                popup.classList.add('show');
            }, 10);
        }

        function closePopup(id) {
            const popup = document.getElementById(id);
            popup.classList.remove('show');
            setTimeout(() => {
                popup.style.display = 'none';
            }, 300);
        }

        // Обработчик поиска
        function handleSearch(event) {
            if (event.key === 'Enter') {
                const searchQuery = document.getElementById('search-box').value.toLowerCase().trim();
                let pageUrl = '';

                switch (searchQuery) {
                    case 'select_area':
                        pageUrl = '/select_area';
                        break;
                    case 'find_area':
                        pageUrl = '/find_area';
                        break;
                    case 'test':
                        pageUrl = '/test';
                        break;
                    default:
                        alert('Страница не найдена!');
                        return;
                }

                window.location.href = pageUrl;
            }
        }

        // Функция для отображения меню поиска
        function showMenu() {
            const searchBox = document.getElementById('search-box');
            const pageMenu = document.getElementById('page-menu');

            if (searchBox.value.trim() !== "") {
                pageMenu.style.display = 'block';
            } else {
                pageMenu.style.display = 'none';
            }
        }

        // Скрыть меню при клике вне его
        window.addEventListener('click', function(event) {
            const searchBox = document.getElementById('search-box');
            const pageMenu = document.getElementById('page-menu');

            if (!searchBox.contains(event.target) && !pageMenu.contains(event.target)) {
                pageMenu.style.display = 'none';
            }
        });

        // Обработчик входа/регистрации
        document.addEventListener('DOMContentLoaded', function() {
            const loginButton = document.querySelector('.nav-actions button:nth-child(3)');
            const navActions = document.querySelector('.nav-actions');
            const username = localStorage.getItem('username');

            if (username) {
                const userButton = document.createElement('button');
                userButton.textContent = username;
                userButton.addEventListener('click', function() {
                    const logoutConfirm = confirm('Выйти из аккаунта?');
                    if (logoutConfirm) {
                        localStorage.removeItem('username');
                        location.reload();
                    }
                });
                navActions.replaceChild(userButton, loginButton);
            } else {
                loginButton.addEventListener('click', function() {
                    window.location.href = 'login.html';
                });
            }
        });
    </script>
</body>
</html>